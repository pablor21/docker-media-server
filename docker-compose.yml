version: '3.8'
name: "media_server"
services:
  # plex:
  #   image: linuxserver/plex:latest
  #   container_name: plex
  #   environment:
  #     - PUID=1000
  #     - PGID=1000
  #     - VERSION=docker
  #   volumes:
  #     - ./plex/config:/config
  #     - /path/to/media:/media
  #   ports:
  #     - 32400:32400
  #   restart: unless-stopped

  jellyfin:
    image: linuxserver/jellyfin:latest
    container_name: jellyfin
    environment:
      - PUID=1000
      - PGID=1000
    volumes:
      - ./data/jellyfin/config:/config
      - movies:/movies
      - tvshows:/tvshows
    # ports:
    #   - 8096:8096
    #   - 8920:8920
    restart: unless-stopped
    networks:
      - media_network

  radarr:
    image: linuxserver/radarr:latest
    container_name: radarr
    environment:
      - PUID=1000
      - PGID=1000
    volumes:
      - ./data/radarr/config:/config
      - movies:/movies
      - downloads:/downloads
    # ports:
    #   - 7878:7878
    restart: unless-stopped
    networks:
      - media_network

  sonarr:
    image: linuxserver/sonarr:latest
    container_name: sonarr
    environment:
      - PUID=1000
      - PGID=1000
    volumes:
      - ./data/sonarr/config:/config
      - tvshows:/tvshows
      - downloads:/downloads
    # ports:
    #   - 8989:8989
    restart: unless-stopped
    networks:
      - media_network
  jackett:
    image: linuxserver/jackett:latest
    container_name: jackett
    environment:
      - PUID=1000
      - PGID=1000
    volumes:
      - ./data/jackett/config:/config
      - downloads:/downloads
    # ports:
    #   - 9117:9117
    restart: unless-stopped
    networks:
      - media_network

  transmission:
    image: linuxserver/transmission:latest
    container_name: transmission
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Etc/UTC
      - TRANSMISSION_RPC_USERNAME=${TRANSMISSION_RPC_USERNAME}
      - TRANSMISSION_RPC_PASSWORD=${TRANSMISSION_RPC_PASSWORD}
      - TRANSMISSION_RPC_AUTHENTICATION_REQUIRED=${TRANSMISSION_RPC_AUTHENTICATION_REQUIRED}
    volumes:
      - ./data/transmission/config:/config
      - downloads:/downloads
    # ports:
    #   - 9091:9091
    #   - 51413:51413
    #   - 51413:51413/udp
    restart: unless-stopped
    networks:
      - media_network
networks: 
  media_network:
    name: ${MEDIA_NETWORK_NAME}
    external: ${MEDIA_NETWORK_EXTERNAL:-false}
    driver: bridge  # only used if external=false (Compose creates the network)
volumes:
  downloads:  
     driver: local
     driver_opts:
        type: none
        device: ${DOWNLOADS_PATH:-./data/downloads}
        o: bind
  movies:
     driver: local
     driver_opts:
        type: none
        device:  ${MOVIES_PATH:-./data/movies}
        o: bind
  tvshows:
     driver: local
     driver_opts:
        type: none
        device: ${TVSHOWS_PATH:-./data/tvshows}
        o: bind